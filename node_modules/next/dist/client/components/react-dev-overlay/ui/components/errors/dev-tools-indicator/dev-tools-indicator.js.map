{"version":3,"sources":["../../../../../../../../src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.tsx"],"sourcesContent":["import type { Dispatch, SetStateAction } from 'react'\nimport { STORAGE_KEY_POSITION, type OverlayState } from '../../../../shared'\n\nimport { useState, useEffect, useRef, createContext, useContext } from 'react'\nimport { Toast } from '../../toast'\nimport { NextLogo } from './next-logo'\nimport { useIsDevBuilding } from '../../../../../../dev/dev-build-indicator/internal/initialize'\nimport { useIsDevRendering } from '../../../../utils/dev-indicator/dev-render-indicator'\nimport { useDelayedRender } from '../../../hooks/use-delayed-render'\nimport { TurbopackInfo } from './dev-tools-info/turbopack-info'\nimport { RouteInfo } from './dev-tools-info/route-info'\nimport GearIcon from '../../../icons/gear-icon'\nimport { UserPreferences } from './dev-tools-info/user-preferences'\n\n// TODO: add E2E tests to cover different scenarios\n\nconst INDICATOR_POSITION =\n  (process.env\n    .__NEXT_DEV_INDICATOR_POSITION as typeof window.__NEXT_DEV_INDICATOR_POSITION) ||\n  'bottom-left'\n\nexport type DevToolsIndicatorPosition = typeof INDICATOR_POSITION\n\nexport function DevToolsIndicator({\n  state,\n  errorCount,\n  isBuildError,\n  setIsErrorOverlayOpen,\n}: {\n  state: OverlayState\n  errorCount: number\n  isBuildError: boolean\n  setIsErrorOverlayOpen: (\n    isErrorOverlayOpen: boolean | ((prev: boolean) => boolean)\n  ) => void\n}) {\n  const [isDevToolsIndicatorVisible, setIsDevToolsIndicatorVisible] =\n    useState(true)\n\n  return (\n    <DevToolsPopover\n      routerType={state.routerType}\n      semver={state.versionInfo.installed}\n      issueCount={errorCount}\n      isStaticRoute={state.staticIndicator}\n      hide={() => {\n        setIsDevToolsIndicatorVisible(false)\n        fetch('/__nextjs_disable_dev_indicator', {\n          method: 'POST',\n        })\n      }}\n      setIsErrorOverlayOpen={setIsErrorOverlayOpen}\n      isTurbopack={!!process.env.TURBOPACK}\n      disabled={state.disableDevIndicator || !isDevToolsIndicatorVisible}\n      isBuildError={isBuildError}\n    />\n  )\n}\n\n//////////////////////////////////////////////////////////////////////////////////////\n\nconst ANIMATE_OUT_DURATION_MS = 200\nconst ANIMATE_OUT_TIMING_FUNCTION = 'cubic-bezier(0.175, 0.885, 0.32, 1.1)'\n\ninterface C {\n  closeMenu: () => void\n  selectedIndex: number\n  setSelectedIndex: Dispatch<SetStateAction<number>>\n}\n\nconst Context = createContext({} as C)\n\nfunction getInitialPosition() {\n  if (\n    typeof localStorage !== 'undefined' &&\n    localStorage.getItem(STORAGE_KEY_POSITION)\n  ) {\n    return localStorage.getItem(\n      STORAGE_KEY_POSITION\n    ) as DevToolsIndicatorPosition\n  }\n\n  return INDICATOR_POSITION\n}\n\nfunction DevToolsPopover({\n  routerType,\n  disabled,\n  issueCount,\n  isStaticRoute,\n  isTurbopack,\n  isBuildError,\n  hide,\n  setIsErrorOverlayOpen,\n}: {\n  routerType: 'pages' | 'app'\n  disabled: boolean\n  issueCount: number\n  isStaticRoute: boolean\n  semver: string | undefined\n  isTurbopack: boolean\n  isBuildError: boolean\n  hide: () => void\n  setIsErrorOverlayOpen: (\n    isOverlayOpen: boolean | ((prev: boolean) => boolean)\n  ) => void\n}) {\n  const menuRef = useRef<HTMLDivElement>(null)\n  const triggerRef = useRef<HTMLButtonElement | null>(null)\n  const turbopackRef = useRef<HTMLElement>(null)\n  const triggerTurbopackRef = useRef<HTMLButtonElement | null>(null)\n  const routeInfoRef = useRef<HTMLElement>(null)\n  const triggerRouteInfoRef = useRef<HTMLButtonElement | null>(null)\n  const preferencesRef = useRef<HTMLElement>(null)\n  const triggerPreferencesRef = useRef<HTMLButtonElement | null>(null)\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n  const [isTurbopackInfoOpen, setIsTurbopackInfoOpen] = useState(false)\n  const [isRouteInfoOpen, setIsRouteInfoOpen] = useState(false)\n  const [isPreferencesOpen, setIsPreferencesOpen] = useState(false)\n  const [selectedIndex, setSelectedIndex] = useState(-1)\n  const [position, setPosition] = useState(getInitialPosition())\n\n  // This hook lets us do an exit animation before unmounting the component\n  const { mounted: menuMounted, rendered: menuRendered } = useDelayedRender(\n    isMenuOpen,\n    {\n      // Intentionally no fade in, makes the UI feel more immediate\n      enterDelay: 0,\n      // Graceful fade out to confirm that the UI did not break\n      exitDelay: ANIMATE_OUT_DURATION_MS,\n    }\n  )\n  const { mounted: turbopackInfoMounted, rendered: turbopackInfoRendered } =\n    useDelayedRender(isTurbopackInfoOpen, {\n      enterDelay: 0,\n      exitDelay: ANIMATE_OUT_DURATION_MS,\n    })\n  const { mounted: routeInfoMounted, rendered: routeInfoRendered } =\n    useDelayedRender(isRouteInfoOpen, {\n      enterDelay: 0,\n      exitDelay: ANIMATE_OUT_DURATION_MS,\n    })\n  const { mounted: preferencesMounted, rendered: preferencesRendered } =\n    useDelayedRender(isPreferencesOpen, {\n      enterDelay: 0,\n      exitDelay: ANIMATE_OUT_DURATION_MS,\n    })\n\n  // Features to make the menu accessible\n  useFocusTrap(menuRef, triggerRef, isMenuOpen)\n  useClickOutside(menuRef, triggerRef, isMenuOpen, closeMenu)\n  useFocusTrap(turbopackRef, triggerTurbopackRef, isTurbopackInfoOpen)\n  useClickOutside(\n    turbopackRef,\n    triggerTurbopackRef,\n    isTurbopackInfoOpen,\n    closeTurbopackInfo\n  )\n  useFocusTrap(routeInfoRef, triggerRouteInfoRef, isRouteInfoOpen)\n  useClickOutside(\n    routeInfoRef,\n    triggerRouteInfoRef,\n    isRouteInfoOpen,\n    closeRouteInfo\n  )\n  useFocusTrap(preferencesRef, triggerPreferencesRef, isPreferencesOpen)\n  useClickOutside(\n    preferencesRef,\n    triggerPreferencesRef,\n    isPreferencesOpen,\n    closePreferences\n  )\n  function select(index: number | 'first' | 'last') {\n    if (index === 'first') {\n      const all = menuRef.current?.querySelectorAll('[role=\"menuitem\"]')\n      if (all) {\n        const firstIndex = all[0].getAttribute('data-index')\n        select(Number(firstIndex))\n      }\n      return\n    }\n\n    if (index === 'last') {\n      const all = menuRef.current?.querySelectorAll('[role=\"menuitem\"]')\n      if (all) {\n        const lastIndex = all.length - 1\n        select(lastIndex)\n      }\n      return\n    }\n\n    const el = menuRef.current?.querySelector(\n      `[data-index=\"${index}\"]`\n    ) as HTMLElement\n    if (el) {\n      setSelectedIndex(index)\n      el?.focus()\n    }\n  }\n\n  function onMenuKeydown(e: React.KeyboardEvent<HTMLDivElement>) {\n    e.preventDefault()\n\n    switch (e.key) {\n      case 'ArrowDown':\n        const next = selectedIndex + 1\n        select(next)\n        break\n      case 'ArrowUp':\n        const prev = selectedIndex - 1\n        select(prev)\n        break\n      case 'Home':\n        select('first')\n        break\n      case 'End':\n        select('last')\n        break\n      default:\n        break\n    }\n  }\n\n  function onTriggerKeydown(e: React.KeyboardEvent<HTMLButtonElement>) {\n    if (isMenuOpen) {\n      return\n    }\n\n    // Open with first item focused\n    if (e.key === 'ArrowDown' || e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault()\n      setIsMenuOpen(true)\n      // Run on next tick because querying DOM after state change\n      setTimeout(() => {\n        select('first')\n      })\n    }\n\n    // Open with last item focused\n    if (e.key === 'ArrowUp') {\n      e.preventDefault()\n      setIsMenuOpen(true)\n      // Run on next tick because querying DOM after state change\n      setTimeout(() => {\n        select('last')\n      })\n    }\n  }\n\n  function openErrorOverlay() {\n    if (issueCount > 0) {\n      setIsErrorOverlayOpen(true)\n    }\n  }\n\n  function toggleErrorOverlay() {\n    setIsErrorOverlayOpen((prev) => !prev)\n  }\n\n  function onTriggerClick() {\n    setIsMenuOpen((prev) => !prev)\n  }\n\n  function closeMenu() {\n    setIsMenuOpen(false)\n    // Avoid flashing selected state\n    setTimeout(() => {\n      setSelectedIndex(-1)\n    }, ANIMATE_OUT_DURATION_MS)\n  }\n\n  function closeTurbopackInfo() {\n    setIsTurbopackInfoOpen(false)\n  }\n\n  function closeRouteInfo() {\n    setIsRouteInfoOpen(false)\n  }\n\n  function closePreferences() {\n    setIsPreferencesOpen(false)\n  }\n\n  function handleHideDevtools() {\n    closePreferences()\n    hide()\n  }\n\n  const [vertical, horizontal] = position.split('-', 2)\n\n  return (\n    <Toast\n      data-nextjs-toast\n      style={{\n        boxShadow: 'none',\n        zIndex: 2147483647,\n        // Reset the toast component's default positions.\n        bottom: 'initial',\n        left: 'initial',\n        [vertical]: '10px',\n        [horizontal]: '20px',\n      }}\n    >\n      <NextLogo\n        ref={triggerRef}\n        aria-haspopup=\"menu\"\n        aria-expanded={isMenuOpen}\n        aria-controls=\"nextjs-dev-tools-menu\"\n        aria-label={`${isMenuOpen ? 'Close' : 'Open'} Next.js Dev Tools`}\n        data-nextjs-dev-tools-button\n        disabled={disabled}\n        issueCount={issueCount}\n        onTriggerClick={onTriggerClick}\n        onKeyDown={onTriggerKeydown}\n        toggleErrorOverlay={toggleErrorOverlay}\n        isDevBuilding={useIsDevBuilding()}\n        isDevRendering={useIsDevRendering()}\n        isBuildError={isBuildError}\n      />\n\n      {routeInfoMounted && (\n        <RouteInfo\n          ref={routeInfoRef}\n          routerType={routerType}\n          routeType={isStaticRoute ? 'Static' : 'Dynamic'}\n          isOpen={isRouteInfoOpen}\n          setIsOpen={setIsRouteInfoOpen}\n          setPreviousOpen={setIsMenuOpen}\n          style={{\n            [vertical]: 'calc(100% + 8px)',\n            [horizontal]: 0,\n          }}\n          data-rendered={routeInfoRendered}\n        />\n      )}\n\n      {turbopackInfoMounted && (\n        <TurbopackInfo\n          ref={turbopackRef}\n          isOpen={isTurbopackInfoOpen}\n          setIsOpen={setIsTurbopackInfoOpen}\n          setPreviousOpen={setIsMenuOpen}\n          style={{\n            [vertical]: 'calc(100% + 8px)',\n            [horizontal]: 0,\n          }}\n          data-rendered={turbopackInfoRendered}\n        />\n      )}\n\n      {preferencesMounted && (\n        <UserPreferences\n          ref={preferencesRef}\n          isOpen={isPreferencesOpen}\n          hide={handleHideDevtools}\n          setPosition={setPosition}\n          position={position}\n          style={{\n            [vertical]: 'calc(100% + 8px)',\n            [horizontal]: 0,\n          }}\n          data-rendered={preferencesRendered}\n        />\n      )}\n\n      {menuMounted && (\n        <div\n          ref={menuRef}\n          id=\"nextjs-dev-tools-menu\"\n          role=\"menu\"\n          dir=\"ltr\"\n          aria-orientation=\"vertical\"\n          aria-label=\"Next.js Dev Tools Items\"\n          tabIndex={-1}\n          className=\"dev-tools-indicator-menu\"\n          onKeyDown={onMenuKeydown}\n          data-rendered={menuRendered}\n          style={\n            {\n              '--animate-out-duration-ms': `${ANIMATE_OUT_DURATION_MS}ms`,\n              '--animate-out-timing-function': ANIMATE_OUT_TIMING_FUNCTION,\n              [vertical]: 'calc(100% + 8px)',\n              [horizontal]: 0,\n            } as React.CSSProperties\n          }\n        >\n          <Context.Provider\n            value={{\n              closeMenu,\n              selectedIndex,\n              setSelectedIndex,\n            }}\n          >\n            <div className=\"dev-tools-indicator-inner\">\n              {issueCount > 0 && (\n                <MenuItem\n                  title={`${issueCount} ${issueCount === 1 ? 'issue' : 'issues'} found. Click to view details in the dev overlay.`}\n                  index={0}\n                  label=\"Issues\"\n                  value={<IssueCount>{issueCount}</IssueCount>}\n                  onClick={openErrorOverlay}\n                />\n              )}\n              <MenuItem\n                title={`Current route is ${isStaticRoute ? 'static' : 'dynamic'}.`}\n                label=\"Route\"\n                index={1}\n                value={isStaticRoute ? 'Static' : 'Dynamic'}\n                onClick={() => setIsRouteInfoOpen(true)}\n                data-nextjs-route-type={isStaticRoute ? 'static' : 'dynamic'}\n              />\n              {isTurbopack ? (\n                <MenuItem\n                  title=\"Turbopack is enabled.\"\n                  label=\"Turbopack\"\n                  value=\"Enabled\"\n                />\n              ) : (\n                <MenuItem\n                  index={2}\n                  title=\"Learn about Turbopack and how to enable it in your application.\"\n                  label=\"Try Turbopack\"\n                  value={<ChevronRight />}\n                  onClick={() => setIsTurbopackInfoOpen(true)}\n                />\n              )}\n            </div>\n\n            <div className=\"dev-tools-indicator-footer\">\n              <MenuItem\n                data-preferences\n                label=\"Preferences\"\n                value={<GearIcon />}\n                onClick={() => setIsPreferencesOpen(true)}\n                index={isTurbopack ? 2 : 3}\n              />\n            </div>\n          </Context.Provider>\n        </div>\n      )}\n    </Toast>\n  )\n}\n\nfunction ChevronRight() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n    >\n      <path\n        fill=\"#666\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M5.50011 1.93945L6.03044 2.46978L10.8537 7.293C11.2442 7.68353 11.2442 8.31669 10.8537 8.70722L6.03044 13.5304L5.50011 14.0608L4.43945 13.0001L4.96978 12.4698L9.43945 8.00011L4.96978 3.53044L4.43945 3.00011L5.50011 1.93945Z\"\n      />\n    </svg>\n  )\n}\n\nfunction MenuItem({\n  index,\n  label,\n  value,\n  onClick,\n  href,\n  ...props\n}: {\n  index?: number\n  title?: string\n  label: string\n  value: React.ReactNode\n  href?: string\n  onClick?: () => void\n}) {\n  const isInteractive =\n    typeof onClick === 'function' || typeof href === 'string'\n  const { closeMenu, selectedIndex, setSelectedIndex } = useContext(Context)\n  const selected = selectedIndex === index\n\n  function click() {\n    if (isInteractive) {\n      onClick?.()\n      closeMenu()\n      if (href) {\n        window.open(href, '_blank', 'noopener, noreferrer')\n      }\n    }\n  }\n\n  return (\n    <div\n      className=\"dev-tools-indicator-item\"\n      data-index={index}\n      data-selected={selected}\n      onClick={click}\n      // Needs `onMouseMove` instead of enter to work together\n      // with keyboard and mouse input\n      onMouseMove={() => {\n        if (isInteractive && index !== undefined && selectedIndex !== index) {\n          setSelectedIndex(index)\n        }\n      }}\n      onMouseLeave={() => setSelectedIndex(-1)}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          click()\n        }\n      }}\n      role={isInteractive ? 'menuitem' : undefined}\n      tabIndex={selected ? 0 : -1}\n      {...props}\n    >\n      <span className=\"dev-tools-indicator-label\">{label}</span>\n      <span className=\"dev-tools-indicator-value\">{value}</span>\n    </div>\n  )\n}\n\nfunction IssueCount({ children }: { children: number }) {\n  return (\n    <span\n      className=\"dev-tools-indicator-issue-count\"\n      data-has-issues={children > 0}\n    >\n      <span className=\"dev-tools-indicator-issue-count-indicator\" />\n      {children}\n    </span>\n  )\n}\n\n//////////////////////////////////////////////////////////////////////////////////////\n\nfunction useFocusTrap(\n  menuRef: React.RefObject<HTMLElement | null>,\n  triggerRef: React.RefObject<HTMLButtonElement | null>,\n  isMenuOpen: boolean\n) {\n  useEffect(() => {\n    if (isMenuOpen) {\n      menuRef.current?.focus()\n    } else {\n      const root = triggerRef.current?.getRootNode()\n      const activeElement =\n        root instanceof ShadowRoot ? (root?.activeElement as HTMLElement) : null\n\n      // Only restore focus if the focus was previously on the menu.\n      // This avoids us accidentally focusing on mount when the\n      // user could want to interact with their own app instead.\n      if (menuRef.current?.contains(activeElement)) {\n        triggerRef.current?.focus()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMenuOpen])\n}\n\n//////////////////////////////////////////////////////////////////////////////////////\n\nfunction useClickOutside(\n  menuRef: React.RefObject<HTMLElement | null>,\n  triggerRef: React.RefObject<HTMLButtonElement | null>,\n  isMenuOpen: boolean,\n  closeMenu: () => void\n) {\n  useEffect(() => {\n    if (!isMenuOpen) {\n      return\n    }\n\n    // Close menu when clicking outside of it or its button\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        !(menuRef.current?.getBoundingClientRect()\n          ? event.clientX >= menuRef.current.getBoundingClientRect()!.left &&\n            event.clientX <= menuRef.current.getBoundingClientRect()!.right &&\n            event.clientY >= menuRef.current.getBoundingClientRect()!.top &&\n            event.clientY <= menuRef.current.getBoundingClientRect()!.bottom\n          : false) &&\n        !(triggerRef.current?.getBoundingClientRect()\n          ? event.clientX >= triggerRef.current.getBoundingClientRect()!.left &&\n            event.clientX <=\n              triggerRef.current.getBoundingClientRect()!.right &&\n            event.clientY >= triggerRef.current.getBoundingClientRect()!.top &&\n            event.clientY <= triggerRef.current.getBoundingClientRect()!.bottom\n          : false)\n      ) {\n        closeMenu()\n      }\n    }\n\n    // Close popover when pressing escape\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        closeMenu()\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    document.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('keydown', handleKeyDown)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMenuOpen])\n}\n\n//////////////////////////////////////////////////////////////////////////////////////\n\nexport const DEV_TOOLS_INDICATOR_STYLES = `\n  .dev-tools-indicator-menu {\n    -webkit-font-smoothing: antialiased;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    background: var(--color-background-100);\n    border: 1px solid var(--color-gray-alpha-400);\n    background-clip: padding-box;\n    box-shadow: var(--shadow-menu);\n    border-radius: var(--rounded-xl);\n    position: absolute;\n    font-family: var(--font-stack-sans);\n    z-index: 1000;\n    overflow: hidden;\n    opacity: 0;\n    outline: 0;\n    min-width: 248px;\n    transition: opacity var(--animate-out-duration-ms)\n      var(--animate-out-timing-function);\n\n    &[data-rendered='true'] {\n      opacity: 1;\n      scale: 1;\n    }\n  }\n\n  .dev-tools-indicator-inner {\n    padding: 6px;\n    width: 100%;\n  }\n\n  .dev-tools-indicator-item {\n    display: flex;\n    align-items: center;\n    padding: 8px 6px;\n    height: var(--size-36);\n    border-radius: 6px;\n    text-decoration: none !important;\n    user-select: none;\n    white-space: nowrap;\n\n    svg {\n      width: var(--size-16);\n      height: var(--size-16);\n    }\n\n    &:focus-visible {\n      outline: 0;\n    }\n  }\n\n  .dev-tools-indicator-footer {\n    background: var(--color-background-200);\n    padding: 6px;\n    border-top: 1px solid var(--color-gray-400);\n    width: 100%;\n  }\n\n  .dev-tools-indicator-item[data-selected='true'] {\n    cursor: pointer;\n    background-color: var(--color-gray-200);\n  }\n\n  .dev-tools-indicator-label {\n    font-size: var(--size-14);\n    line-height: var(--size-20);\n    color: var(--color-gray-1000);\n  }\n\n  .dev-tools-indicator-value {\n    font-size: var(--size-14);\n    line-height: var(--size-20);\n    color: var(--color-gray-900);\n    margin-left: auto;\n  }\n\n  .dev-tools-indicator-issue-count {\n    --color-primary: var(--color-gray-800);\n    --color-secondary: var(--color-gray-100);\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    min-width: var(--size-40);\n    height: var(--size-24);\n    background: var(--color-background-100);\n    border: 1px solid var(--color-gray-alpha-400);\n    background-clip: padding-box;\n    box-shadow: var(--shadow-small);\n    padding: 2px;\n    color: var(--color-gray-1000);\n    border-radius: 128px;\n    font-weight: 500;\n    font-size: var(--size-13);\n    font-variant-numeric: tabular-nums;\n\n    &[data-has-issues='true'] {\n      --color-primary: var(--color-red-800);\n      --color-secondary: var(--color-red-100);\n    }\n\n    .dev-tools-indicator-issue-count-indicator {\n      width: var(--size-8);\n      height: var(--size-8);\n      background: var(--color-primary);\n      box-shadow: 0 0 0 2px var(--color-secondary);\n      border-radius: 50%;\n    }\n  }\n\n  .dev-tools-indicator-shortcut {\n    display: flex;\n    gap: 4px;\n\n    kbd {\n      width: var(--size-20);\n      height: var(--size-20);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      border-radius: var(--rounded-md);\n      border: 1px solid var(--color-gray-400);\n      font-family: var(--font-stack-sans);\n      background: var(--color-background-100);\n      color: var(--color-gray-1000);\n      text-align: center;\n      font-size: var(--size-12);\n      line-height: var(--size-16);\n    }\n  }\n`\n"],"names":["DEV_TOOLS_INDICATOR_STYLES","DevToolsIndicator","INDICATOR_POSITION","process","env","__NEXT_DEV_INDICATOR_POSITION","state","errorCount","isBuildError","setIsErrorOverlayOpen","isDevToolsIndicatorVisible","setIsDevToolsIndicatorVisible","useState","DevToolsPopover","routerType","semver","versionInfo","installed","issueCount","isStaticRoute","staticIndicator","hide","fetch","method","isTurbopack","TURBOPACK","disabled","disableDevIndicator","ANIMATE_OUT_DURATION_MS","ANIMATE_OUT_TIMING_FUNCTION","Context","createContext","getInitialPosition","localStorage","getItem","STORAGE_KEY_POSITION","menuRef","useRef","triggerRef","turbopackRef","triggerTurbopackRef","routeInfoRef","triggerRouteInfoRef","preferencesRef","triggerPreferencesRef","isMenuOpen","setIsMenuOpen","isTurbopackInfoOpen","setIsTurbopackInfoOpen","isRouteInfoOpen","setIsRouteInfoOpen","isPreferencesOpen","setIsPreferencesOpen","selectedIndex","setSelectedIndex","position","setPosition","mounted","menuMounted","rendered","menuRendered","useDelayedRender","enterDelay","exitDelay","turbopackInfoMounted","turbopackInfoRendered","routeInfoMounted","routeInfoRendered","preferencesMounted","preferencesRendered","useFocusTrap","useClickOutside","closeMenu","closeTurbopackInfo","closeRouteInfo","closePreferences","select","index","all","current","querySelectorAll","firstIndex","getAttribute","Number","lastIndex","length","el","querySelector","focus","onMenuKeydown","e","preventDefault","key","next","prev","onTriggerKeydown","setTimeout","openErrorOverlay","toggleErrorOverlay","onTriggerClick","handleHideDevtools","vertical","horizontal","split","Toast","data-nextjs-toast","style","boxShadow","zIndex","bottom","left","NextLogo","ref","aria-haspopup","aria-expanded","aria-controls","aria-label","data-nextjs-dev-tools-button","onKeyDown","isDevBuilding","useIsDevBuilding","isDevRendering","useIsDevRendering","RouteInfo","routeType","isOpen","setIsOpen","setPreviousOpen","data-rendered","TurbopackInfo","UserPreferences","div","id","role","dir","aria-orientation","tabIndex","className","Provider","value","MenuItem","title","label","IssueCount","onClick","data-nextjs-route-type","ChevronRight","data-preferences","GearIcon","svg","xmlns","width","height","viewBox","fill","path","fillRule","clipRule","d","href","props","isInteractive","useContext","selected","click","window","open","data-index","data-selected","onMouseMove","undefined","onMouseLeave","span","children","data-has-issues","useEffect","root","getRootNode","activeElement","ShadowRoot","contains","handleClickOutside","event","getBoundingClientRect","clientX","right","clientY","top","handleKeyDown","document","addEventListener","removeEventListener"],"mappings":"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"}